{
  "hash": "438ed2b196b6e7514f3e93f1a4d19f2b",
  "result": {
    "markdown": "---\ntitle: \"Directed Acyclic Graphs\"\nauthor: \"Ananya Saha\"\n---\n\n\n## Assignment\n\n1. DAG from parking-spots example:\n\n::: {.cell hash='05_dag_cache/html/unnamed-chunk-1_45a55a93809249afa815ca003bee4bbd'}\n\n```{.r .cell-code}\nlibrary(dagitty)\nlibrary(ggdag)\nlibrary(tidyverse)\n\ncon <- dagify(\n  X ~ Z,\n  Y ~ Z,\n  Y ~ X,\n  coords = list(x = c(Y = 3, Z = 2, X = 1),\n                y = c(Y = 0, Z = 1, X = 0)),\n  labels = list(X = \"Parking-spot available\",\n                Y = \"Sales\",\n                Z = \"Customers\")\n)\n\nggdag(con) +\n  geom_dag_text(color = \"white\") +\n  geom_dag_edges(edge_color = \"white\") +\n  geom_dag_label_repel(aes(label = label))\n```\n\n::: {.cell-output-display}\n![](05_dag_files/figure-html/unnamed-chunk-1-1.png){width=672}\n:::\n:::\n\n\n2. Examining the data file customer_sat.rds:\n\n::: {.cell hash='05_dag_cache/html/unnamed-chunk-2_81754c3c3461036447f17b5679dad18b'}\n\n```{.r .cell-code}\ndf <- readRDS(\"data/customer_sat.rds\")\nstr(df)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n#> tibble [15 Ã— 3] (S3: tbl_df/tbl/data.frame)\n#>  $ follow_ups  : num [1:15] 8 7 8 9 10 6 7 6 8 8 ...\n#>  $ satisfaction: num [1:15] 40 45 47 44 50 55 60 62 59 65 ...\n#>  $ subscription: chr [1:15] \"Elite\" \"Elite\" \"Elite\" \"Elite\" ...\n```\n:::\n\n```{.r .cell-code}\ndf\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"follow_ups\"],\"name\":[1],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"satisfaction\"],\"name\":[2],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"subscription\"],\"name\":[3],\"type\":[\"chr\"],\"align\":[\"left\"]}],\"data\":[{\"1\":\"8\",\"2\":\"40\",\"3\":\"Elite\"},{\"1\":\"7\",\"2\":\"45\",\"3\":\"Elite\"},{\"1\":\"8\",\"2\":\"47\",\"3\":\"Elite\"},{\"1\":\"9\",\"2\":\"44\",\"3\":\"Elite\"},{\"1\":\"10\",\"2\":\"50\",\"3\":\"Elite\"},{\"1\":\"6\",\"2\":\"55\",\"3\":\"Premium+\"},{\"1\":\"7\",\"2\":\"60\",\"3\":\"Premium+\"},{\"1\":\"6\",\"2\":\"62\",\"3\":\"Premium+\"},{\"1\":\"8\",\"2\":\"59\",\"3\":\"Premium+\"},{\"1\":\"8\",\"2\":\"65\",\"3\":\"Premium+\"},{\"1\":\"0\",\"2\":\"70\",\"3\":\"Premium\"},{\"1\":\"1\",\"2\":\"74\",\"3\":\"Premium\"},{\"1\":\"2\",\"2\":\"77\",\"3\":\"Premium\"},{\"1\":\"2\",\"2\":\"74\",\"3\":\"Premium\"},{\"1\":\"3\",\"2\":\"80\",\"3\":\"Premium\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n\n```{.r .cell-code}\n# (1) regress satisfaction on follow_ups\nmodel1 <- lm(satisfaction ~ follow_ups, data = df)\nsummary(model1)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n#> \n#> Call:\n#> lm(formula = satisfaction ~ follow_ups, data = df)\n#> \n#> Residuals:\n#>     Min      1Q  Median      3Q     Max \n#> -12.412  -5.257   1.733   4.506  12.588 \n#> \n#> Coefficients:\n#>             Estimate Std. Error t value Pr(>|t|)    \n#> (Intercept)  78.8860     4.2717  18.467 1.04e-10 ***\n#> follow_ups   -3.3093     0.6618  -5.001 0.000243 ***\n#> ---\n#> Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n#> \n#> Residual standard error: 7.923 on 13 degrees of freedom\n#> Multiple R-squared:  0.658,\tAdjusted R-squared:  0.6316 \n#> F-statistic: 25.01 on 1 and 13 DF,  p-value: 0.0002427\n```\n:::\n\n```{.r .cell-code}\n# (2) regress satisfaction on follow_ups and account for subscription\nmodel2 <- lm(satisfaction ~ follow_ups + subscription, data = df)\nsummary(model2)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n#> \n#> Call:\n#> lm(formula = satisfaction ~ follow_ups + subscription, data = df)\n#> \n#> Residuals:\n#>     Min      1Q  Median      3Q     Max \n#> -4.3222 -2.1972  0.3167  2.2667  3.9944 \n#> \n#> Coefficients:\n#>                      Estimate Std. Error t value Pr(>|t|)    \n#> (Intercept)           26.7667     6.6804   4.007  0.00206 ** \n#> follow_ups             2.1944     0.7795   2.815  0.01682 *  \n#> subscriptionPremium   44.7222     5.6213   7.956 6.88e-06 ***\n#> subscriptionPremium+  18.0722     2.1659   8.344 4.37e-06 ***\n#> ---\n#> Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n#> \n#> Residual standard error: 2.958 on 11 degrees of freedom\n#> Multiple R-squared:  0.9597,\tAdjusted R-squared:  0.9487 \n#> F-statistic: 87.21 on 3 and 11 DF,  p-value: 5.956e-08\n```\n:::\n:::\n\n\n3. Comparing the coefficients: coefficient for the number of follow-up calls is **negative** which implies that the satisfaction is expected to decrease if the customer receives more calls while that of follow-up calls while accounting for the subscription model is **positive**, implying that satisfaction is expected to increase with the number of calls within a given subscription model.\n\nPerhaps the customer is having problems with more expensive subscription models. \n\n4. Plotting the data:\n\n::: {.cell hash='05_dag_cache/html/unnamed-chunk-3_c4f0ad215bd7e6ab986a32e79081bc0c'}\n\n```{.r .cell-code}\nsat_not_con <- ggplot(df, aes(x = follow_ups, y = satisfaction)) +\n  geom_point() +\n  stat_smooth(method = \"lm\", se = F)\n\nsat_con <- ggplot(df, aes(x = follow_ups, y = satisfaction,\n                            color = subscription, \n                            alpha = subscription)) +\n  geom_point() +\n  stat_smooth(method = \"lm\", se = F) +\n  scale_color_manual(values = c(\"Elite\" = \"red\",\n                                \"Premium+\" = \"blue\",\n                                \"Premium\" = \"black\")) +\n  scale_alpha_manual(values = c(\"Elite\" = 1, \"Premium+\" = 0.6, \"Premium\" = 0.2)) +\n  theme(legend.position = \"right\")\n\n# Displaying both plots\nsat_not_con\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n#> `geom_smooth()` using formula = 'y ~ x'\n```\n:::\n\n::: {.cell-output-display}\n![](05_dag_files/figure-html/unnamed-chunk-3-1.png){width=672}\n:::\n\n```{.r .cell-code}\nsat_con\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n#> `geom_smooth()` using formula = 'y ~ x'\n```\n:::\n\n::: {.cell-output-display}\n![](05_dag_files/figure-html/unnamed-chunk-3-2.png){width=672}\n:::\n:::",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<link href=\"../../site_libs/pagedtable-1.1/css/pagedtable.css\" rel=\"stylesheet\" />\r\n<script src=\"../../site_libs/pagedtable-1.1/js/pagedtable.js\"></script>\r\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}